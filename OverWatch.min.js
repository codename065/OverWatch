/*
â’¸ copyright: Shahnur Alam ( https://github.com/codename065/ )
*/
const OverWatch=e=>{let t=document.getElementById(e),r=t.innerHTML.replaceAll(/{(.+)}/ig,"<data name='$1'>{$1}</data>");t.innerHTML=r;let o=[],l=[],a=document.querySelectorAll(`#${e} loop`),n=document.querySelectorAll(`#${e} [o-attr]`);for(let[i,c]of Object.entries(n)){let f=c.getAttribute("o-attr"),p=c.getAttribute("w-val");l[p]||(l[p]=[]),l[p].push({_attr:f,_var:p,_elm:c})}for(let[u,h]of Object.entries(a)){let s=h.getAttribute(":for"),y=h.getAttribute(":each");o[s]={_for:s,_each:y,_repeat:h.innerHTML,_loop:h},h.innerHTML=""}let A=[],b="",g={set(e,t,r){b=A.join(".")+`.${t}`,A=[],"object"==typeof r&&(r=new Proxy(r,g),H(b,r)),Reflect.set(e,t,r),m(b,r)},get:(e,t,r)=>(A.push(t),Reflect.get(e,t))},m=(t,r)=>{document.querySelectorAll(`#${e} data[name='${t}']`).forEach(e=>{e.innerHTML=r}),l[t]&&l[t].forEach(e=>{e._elm.setAttribute(e._attr,r)})},H=(e,t)=>{if(o[e]){let r=o[e],l="",a=0;t.forEach(t=>{let o=Object.keys(t),n=r._repeat;o.forEach(o=>{n=`<loop_item key='${e}.${a}.${o}'>`+n.replace(`:${r._each}.${o}`,t[o])+"</loop_item>"}),l+=n,a++}),r._loop.innerHTML=l}for(let[n,i]of Object.entries(t)){let c=`${e}.${n}`;"object"!=typeof i?m(c,i):"object"==typeof i&&(i=new Proxy(i,g),H(c,i))}};return new Proxy({},g)};
