/*
â’¸ copyright: Shahnur Alam ( https://github.com/codename065/ )
*/
const OverWatch=e=>{let t=document.getElementById(e),o=t.innerHTML.replaceAll(/{(.+)}/ig,"<data name='$1'>{$1}</data>");t.innerHTML=o;let r=[],l=document.querySelectorAll(`#${e} loop`);for(let[n,a]of Object.entries(l)){let c=a.getAttribute(":for"),i=a.getAttribute(":each");r[c]={_for:c,_each:i,_repeat:a.innerHTML,_loop:a},a.innerHTML=""}console.log("_loops",r);let p=[],f="",s={set(e,t,o){f=p.join(".")+`.${t}`,p=[],"object"==typeof o&&(o=new Proxy(o,s),h(f,o)),Reflect.set(e,t,o),g(f,o)},get:(e,t,o)=>(p.push(t),Reflect.get(e,t))},g=(t,o)=>{document.querySelectorAll(`#${e} data[name='${t}']`).forEach(e=>{e.innerHTML=o})},h=(e,t)=>{if(console.log("Processed "+e,t),r[e]){let o=r[e],l="",n=0;t.forEach(t=>{let r=Object.keys(t),a=o._repeat;r.forEach(r=>{a=`<loop_item key='${e}.${n}.${r}'>`+a.replace(`:${o._each}.${r}`,t[r])+"</loop_item>"}),l+=a,n++}),o._loop.innerHTML=l}for(let[a,c]of Object.entries(t)){let i=`${e}.${a}`;"object"!=typeof c?g(i,c):"object"==typeof c&&(c=new Proxy(c,s),h(i,c))}};return new Proxy({},s)};
